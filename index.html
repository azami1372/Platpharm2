<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>سامانه پخش دارو</title>
<style>
  :root{
    --bg: #f6f8fb;
    --card: #ffffff;
    --muted: #74839a;
    --accent: linear-gradient(90deg,#4f46e5,#06b6d4);
    --primary: #4f46e5;
    --success: #16a34a;
    --danger: #ef4444;
    --glass: rgba(255,255,255,0.7);
    --radius: 12px;
  }

  /* Reset */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: "Segoe UI", Tahoma, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    background: linear-gradient(180deg,#eef2ff 0%, #f6f8fb 100%);
    color:#0f172a;
    direction: rtl;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:28px;
  }

  .container{
    max-width:1200px;
    margin:0 auto;
  }

  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:16px;
    margin-bottom:20px;
  }

  .brand{
    display:flex;
    gap:14px;
    align-items:center;
  }

  .logo{
    width:56px;
    height:56px;
    border-radius:12px;
    background:var(--accent);
    box-shadow: 0 6px 18px rgba(79,70,229,0.16);
    display:flex;
    align-items:center;
    justify-content:center;
    color:white;
    font-weight:700;
    font-size:20px;
  }

  h1{
    margin:0;
    font-size:20px;
    letter-spacing:0.2px;
  }
  p.lead{
    margin:0;
    color:var(--muted);
    font-size:13px;
  }

  /* Card */
  .card{
    background:var(--card);
    border-radius:var(--radius);
    padding:18px;
    box-shadow: 0 6px 20px rgba(15,23,42,0.06);
  }

  /* Controls */
  .controls{
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    margin-top:12px;
    align-items:center;
  }

  .search{
    flex:1 1 320px;
    display:flex;
    gap:8px;
    align-items:center;
    background:linear-gradient(180deg, rgba(79,70,229,0.03), rgba(6,182,212,0.01));
    padding:8px;
    border-radius:10px;
    border:1px solid rgba(15,23,42,0.03);
  }

  .search input{
    border:0;
    outline:0;
    background:transparent;
    padding:8px;
    font-size:14px;
    width:100%;
  }

  .select, .small-input{
    background:#fbfdff;
    border:1px solid rgba(15,23,42,0.06);
    padding:8px 10px;
    border-radius:10px;
    font-size:14px;
  }

  .select{ min-width:160px }

  /* Table style */
  .table-wrap{
    margin-top:16px;
    overflow:auto;
    border-radius:10px;
    border:1px solid rgba(15,23,42,0.04);
  }

  table{
    border-collapse:collapse;
    width:100%;
    min-width:920px;
  }

  thead th{
    text-align:center;
    font-size:13px;
    padding:12px 14px;
    background:linear-gradient(180deg, rgba(250,250,255,0.7), rgba(245,247,255,0.7));
    position:sticky;
    top:0;
    z-index:2;
    color:#334155;
    font-weight:600;
  }

  tbody td{
    padding:12px 14px;
    border-top:1px solid rgba(15,23,42,0.04);
    vertical-align:middle;
    text-align:center;
    font-size:14px;
    color:#0f172a;
  }

  tbody tr{
    transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
  }

  tbody tr:hover{
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(2,6,23,0.06);
    background: linear-gradient(90deg, rgba(79,70,229,0.02), rgba(6,182,212,0.02));
  }

  /* badges */
  .badge{
    display:inline-block;
    padding:6px 8px;
    border-radius:999px;
    font-size:12px;
    font-weight:600;
    color:white;
  }
  .badge-primary{ background:var(--primary) }
  .badge-success{ background:var(--success) }
  .badge-danger{ background:var(--danger) }
  .muted{ color:var(--muted); font-weight:600; font-size:12px }

  /* small screens */
  @media (max-width:900px){
    thead th{ font-size:12px; padding:10px 8px }
    tbody td{ padding:10px 8px; font-size:13px }
    .brand h1{ font-size:18px }
  }

  /* footer */
  footer{
    margin-top:18px;
    display:flex;
    justify-content:space-between;
    color:var(--muted);
    font-size:13px;
    gap:12px;
    align-items:center;
  }

  .legend{ display:flex; gap:10px; align-items:center; }
  .legend span{ display:flex; gap:6px; align-items:center; color:var(--muted) }
  .dot{ width:10px; height:10px; border-radius:50% }
</style>
</head>
<body>

<h2>لیست محصولات</h2>

<div>
  <input type="text" id="search" placeholder="جست‌وجو نام محصول...">
  <select id="branchFilter">
    <option value="">همه شعب</option>
  </select>
</div>

<table>
  <thead>
    <tr>
      <th>تاریخ بروز رسانی</th>
      <th>نام محصول</th>
      <th>تاریخ انقضا</th>
      <th>فرجه کالایی</th>
      <th>فرجه زمانی</th>
      <th>قیمت خرید</th>
      <th>قیمت مصرف</th>
      <th>شرکت پخش</th>
      <th>شعبه</th>
    </tr>
  </thead>
  <tbody id="productList"></tbody>
</table>

<script>
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vR7kbN6Iko2M9Z-2S1By3KNa6GelTUzWkwDajxjlbgvC68XUqQODtCIy856NNZ7KpOVZ_VTt3yv1U0K/pub?gid=0&single=true&output=csv"; // لینک CSV شیت

let allProducts = [];

async function fetchData() {
  const res = await fetch(sheetURL);
  const text = await res.text();
  const rows = text.split("\n").map(r => r.split(","));
  const headers = rows[0].map(h => h.trim());
  allProducts = rows.slice(1).map(r => {
    let obj = {};
    headers.forEach((h,i) => obj[h] = r[i]?.trim());
    return obj;
  });

  fillBranchFilter();
  render(allProducts);
}

function fillBranchFilter() {
  const branchSet = [...new Set(allProducts.map(p => p["شعبه"]))];
  const branchSelect = document.getElementById("branchFilter");
  branchSet.forEach(branch => {
    let opt = document.createElement("option");
    opt.value = branch;
    opt.textContent = branch;
    branchSelect.appendChild(opt);
  });
}

function render(products) {
  document.getElementById("productList").innerHTML = products.map(p => `
    <tr>
      <td>${p["تاریخ بروز رسانی"]}</td>
      <td>${p["نام محصول"]}</td>
      <td>${p["تاریخ انقضا"]}</td>
      <td>${p["فرجه کالایی"]}</td>
      <td>${p["فرجه زمانی"]}</td>
      <td>${p["قیمت خرید"]}</td>
      <td>${p["قیمت مصرف"]}</td>
      <td>${p["شرکت پخش"]}</td>
      <td>${p["شعبه"]}</td>
    </tr>
  `).join('');
}

function filterData() {
  let search = document.getElementById("search").value.trim();
  let branch = document.getElementById("branchFilter").value;

  let filtered = allProducts.filter(p => 
    (p["نام محصول"]?.includes(search)) &&
    (branch === "" || p["شعبه"] === branch)
  );

  render(filtered);
}

document.getElementById("search").addEventListener("input", filterData);
document.getElementById("branchFilter").addEventListener("change", filterData);

fetchData();
</script>

</body>
</html>


